2207 110513962 000001 35979502 01543|4------------------------------------                                                        .
2207 110513962 000001 35979502 01543|4- M.T.I      : 1200                                                                         .
2207 110513962 000001 35979502 01543|4------------------------------------                                                        .
2207 110513962 000001 35979502 01543|4- FLD (FIELD): LENGTH :  DATA                                                               .
2207 110513962 000001 35979502 01543|4------------------------------------                                                        .
2207 110513962 000001 35979502 01543|4- FLD (002) : (016) : [4381724951308804]     {correct}                                              
2207 110513962 000001 35979502 01543|4- FLD (003) : (006) : [000000]               {correct}                                           
2207 110513962 000001 35979502 01543|4- FLD (004) : (012) : [000000008000]         {correct}                                           
2207 110513962 000001 35979502 01543|4- FLD (005) : (012) : [000000008000]   no need to send such field                                                  .
2207 110513962 000001 35979502 01543|4- FLD (006) : (012) : [000000008000]   no need to send such field                                                     
2207 110513962 000001 35979502 01543|4- FLD (007) : (010) : [0722080513]    format not correct...should be YYMMDDhhmm [1807221018]                                                     
2207 110513962 000001 35979502 01543|4- FLD (011) : (006) : [065883]               {correct}                                                        
2207 110513962 000001 35979502 01543|4- FLD (012) : (012) : [180722101805]         {correct}                                                 
2207 110513962 000001 35979502 01543|4- FLD (014) : (004) : [2005]                 {correct}                                                     
2207 110513962 000001 35979502 01543|4- FLD (017) : (004) : [0722]                 {correct}                                                
2207 110513962 000001 35979502 01543|4- FLD (018) : (004) : [4814]                 {correct}                                             
2207 110513962 000001 35979502 01543|4- FLD (022) : (012) : [81010151014c]         {correct}                                            
2207 110513962 000001 35979502 01543|4- FLD (023) : (003) : [000]                  {correct}                                           
2207 110513962 000001 35979502 01543|4- FLD (024) : (003) : [200]                  {correct}                                            
2207 110513962 000001 35979502 01543|4- FLD (026) : (004) : [4814]                 {correct}                                         
2207 110513962 000001 35979502 01543|4- FLD (032) : (006) : [011200]               {correct} 
                                        FLD (034) : (008) :    {Primary account number extension} (Not Presented)          
2207 110513962 000001 35979502 01543|4- FLD (035) : (036) : [4381724951308804D2005206149904150000]      {correct}                           
2207 110513962 000001 35979502 01543|4- FLD (037) : (012) : [820322000089]                              {correct}                          
2207 110513962 000001 35979502 01543|4- FLD (039) : (003) : [304]            why present action taken in request, it should be presented in response msg?!                                      .
2207 110513962 000001 35979502 01543|4- FLD (041) : (008) : [62301764]             {correct}                                                    .
2207 110513962 000001 35979502 01543|4- FLD (042) : (015) : [004740000474000]      {fals}  -->: FLD (042) : (015) : [4740001005     ]                                                    .
2207 110513962 000001 35979502 01543|4- FLD (043) : (031) : [005    12345678EGY]   (fals) -->   FLD (043) : (011) : [12345678EGY]                                                 .
2207 110513962 000001 35979502 01543|4- FLD (048) : (036) :                                                                       .
2207 110513962 000001 35979502 01543|4       >Tag: 'P13' : ( EXTERNAL_STAN...........) : [000089]                                 .
2207 110513962 000001 35979502 01543|4- FLD (049) : (003) : []     (fals)   where Transaction currency code?                                                                .
2207 110513962 000001 35979502 01543|4- FLD (050) : (003) : []     (fals)   where settlement currency code?                                                               .
2207 110513962 000001 35979502 01543|4- FLD (051) : (003) : []     (fals)   no need to send such field                                                                 .
2207 110513962 000001 35979502 01543|4- FLD (052) : (016) : [0000000000000000]  (fals) we didnt share keys exchange with you to send such field                                                   .
2207 110513962 000001 35979502 01543|4- FLD (053) : (062) :                                                                       .
2207 110513962 000001 35979502 01543|4       > SECURITY FORMAT          ..............: [01]                                      .
2207 110513962 000001 35979502 01543|4       > PIN BLOCK FORMAT         ..............: [01]                                      .
2207 110513962 000001 35979502 01543|4       > PIN ENCRYPTION KEY INDEX ..............: [000]                                     .
2207 110513962 000001 35979502 01543|4       > MAC KEY INDEX            ..............: [000]                                     .
2207 110513962 000001 35979502 01543|4       > SOURCE PID               ..............: [35979502]                                .
2207 110513962 000001 35979502 01543|4       > SOURCE RESOURCE          ..............: [210002]                                  .
2207 110513962 000001 35979502 01543|4       > DESTINATION PID          ..............: [00000000]                                .
2207 110513962 000001 35979502 01543|4       > DESTINATION RESOURCE     ..............: [000001]                                  .
2207 110513962 000001 35979502 01543|4       > USER                     ..............: [POS ISO        ]                         .
2207 110513963 000001 35979502 01543|4       > PURGE TIME               ..............: [000000000]                               .
2207 110513963 000001 35979502 01543|4- FLD (055) : (000) : [01010000003597950221000200000000000001POS ISO        000000000]      .
2207 110513963 000001 35979502 01543|4- FLD (063) : (000) : []                                                                    .
2207 110513963 000001 35979502 01543|4------------------------------------                                                        .
2207 110513963 000001 35979502 01543|5End   DumpIso()                                                                             .
2207 110513963 000001 35979502 01543|5Start Fin_Req_ReplyToPos....                                                                .
2207 110513963 000001 35979502 01543|0==> ICC 000 <==                                                                             .
2207 110513963 000001 35979502 01543|5NOT PROCESSED                                                                               .
2207 110513963 000001 35979502 01543|5dump_p7_struct                                                                              .
2207 110513963 000001 35979502 01543|5Start DumpIso(start)                                                                        .
2207 110513963 000001 35979502 01543|4- BIT MAP  :  7E 34 C7 41 2A E1 FA 02                                                       .
2207 110513963 000001 35979502 01543|4------------------------------------                                                        .
2207 110513963 000001 35979502 01543|4- M.T.I      : 1200                                                                         .
2207 110513963 000001 35979502 01543|4------------------------------------                                                        .
2207 110513963 000001 35979502 01543|4- FLD (FIELD): LENGTH :  DATA                                                               .
2207 110513963 000001 35979502 01543|4------------------------------------                                                        .
2207 110513963 000001 35979502 01543|4- FLD (002) : (016) : [4381724951308804]                                                    .
2207 110513963 000001 35979502 01543|4- FLD (003) : (006) : [000000]                                                              .
2207 110513963 000001 35979502 01543|4- FLD (004) : (012) : [000000008000]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (005) : (012) : [000000008000]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (006) : (012) : [000000008000]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (007) : (010) : [0722080513]                                                          .
2207 110513963 000001 35979502 01543|4- FLD (011) : (006) : [065883]                                                              .
2207 110513963 000001 35979502 01543|4- FLD (012) : (012) : [180722101805]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (014) : (004) : [2005]                                                                .
2207 110513963 000001 35979502 01543|4- FLD (017) : (004) : [0722]                                                                .
2207 110513963 000001 35979502 01543|4- FLD (018) : (004) : [4814]                                                                .
2207 110513963 000001 35979502 01543|4- FLD (022) : (012) : [81010151014c]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (023) : (003) : [000]                                                                 .
2207 110513963 000001 35979502 01543|4- FLD (024) : (003) : [200]                                                                 .
2207 110513963 000001 35979502 01543|4- FLD (026) : (004) : [4814]                                                                .
2207 110513963 000001 35979502 01543|4- FLD (032) : (006) : [011200]                                                              .
2207 110513963 000001 35979502 01543|4- FLD (035) : (036) : [4381724951308804D2005206149904150000]                                .
2207 110513963 000001 35979502 01543|4- FLD (037) : (012) : [820322000089]                                                        .
2207 110513963 000001 35979502 01543|4- FLD (039) : (003) : [304]                                                                 .
2207 110513963 000001 35979502 01543|4- FLD (041) : (008) : [62301764]                                                            .
2207 110513963 000001 35979502 01543|4- FLD (042) : (015) : [004740000474000]                                                     .
2207 110513963 000001 35979502 01543|4- FLD (043) : (031) : [005    12345678EGY]                                                  .
2207 110513963 000001 35979502 01543|4- FLD (048) : (036) :                                                                       .
2207 110513963 000001 35979502 01543|4       >Tag: 'P13' : ( EXTERNAL_STAN...........) : [000089]                                 .
2207 110513963 000001 35979502 01543|4- FLD (049) : (003) : []                                                                    .
2207 110513963 000001 35979502 01543|4- FLD (050) : (003) : []                                                                    .
2207 110513963 000001 35979502 01543|4- FLD (051) : (003) : []                                                                    .
2207 110513963 000001 35979502 01543|4- FLD (052) : (016) : [0000000000000000]                                                    .
2207 110513963 000001 35979502 01543|4- FLD (053) : (062) :                                                                       .
2207 110513963 000001 35979502 01543|4       > SECURITY FORMAT          ..............: [01]                                      .
2207 110513963 000001 35979502 01543|4       > PIN BLOCK FORMAT         ..............: [01]                                      .
2207 110513963 000001 35979502 01543|4       > PIN ENCRYPTION KEY INDEX ..............: [000]                                     .
2207 110513963 000001 35979502 01543|4       > MAC KEY INDEX            ..............: [000]                                     .
2207 110513963 000001 35979502 01543|4       > SOURCE PID               ..............: [35979502]                                .
2207 110513963 000001 35979502 01543|4       > SOURCE RESOURCE          ..............: [210002]                                  .
2207 110513963 000001 35979502 01543|4       > DESTINATION PID          ..............: [00000000]                                .
2207 110513963 000001 35979502 01543|4       > DESTINATION RESOURCE     ..............: [000001]                                  .
2207 110513963 000001 35979502 01543|4       > USER                     ..............: [POS ISO        ]                         .
2207 110513963 000001 35979502 01543|4       > PURGE TIME               ..............: [000000000]                               .
2207 110513963 000001 35979502 01543|4- FLD (055) : (000) : [01010000003597950221000200000000000001POS ISO        000000000]      .
2207 110513963 000001 35979502 01543|4- FLD (063) : (000) : []                                                                    .
2207 110513963 000001 35979502 01543|4------------------------------------                                                        .
2207 110513963 000001 35979502 01543|5End   DumpIso()                                                                             .
2207 110513963 000001 35979502 01543|5Start AuthorLogInsertion()                                                                  .
2207 110513963 000001 35979502 01543|5Start IsoToTlv ()                                                                           .
2207 110513963 000001 35979502 01543|5--IsoToTlv () ISO_PROC_CODE                                                                 .
2207 110513963 000001 35979502 01543|5--IsoToTlv () ISO_TRANS_AMOUNT                                                              .
2207 110513963 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513965 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513965 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513965 000001 35979502 01543|5--IsoToTlv () ISO_STLMNT_AMOUNT                                                             .
2207 110513965 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513966 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513966 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513966 000001 35979502 01543|5--IsoToTlv () ISO_BILLING_AMOUNT                                                            .
2207 110513966 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513967 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513967 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513967 000001 35979502 01543|5--IsoToTlv () ISO_ORIGINAL_AMOUNTS                                                          .
2207 110513967 000001 35979502 01543|5ISO_RESPONSE_CODE(304)                                                                      .
2207 110513967 000001 35979502 01543|5--IsoToTlv () ISO_ICC_DATA                                                                  .
2207 110513967 000001 35979502 01543|5Start ISO_ICC_DATA()                                                                        .
2207 110513968 000001 35979502 01543|5End   ISO_ICC_DATA()                                                                        .
2207 110513968 000001 35979502 01543|5--IsoToTlv () ISO_RESERVED_PRIVE_USAGE_5                                                    .
2207 110513968 000001 35979502 01543|5--IsoToTlv () After Switch                                                                  .
2207 110513968 000001 35979502 01543|5--IsoToTlv () After AuthoBuildTlv                                                           .
2207 110513968 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
048     {         ADD_DATA_PRIVATE}     036     P13006000089P17018180722
049     {       TRAN_CURRENCY_CODE}     003     
050     {       SETL_CURRENCY_CODE}     003     
051     {       BILL_CURRENCY_CODE}     003     
052     {                 PIN_DATA}     016     0000000000000000
053     {            SECURITY_DATA}     062     01010000003597950221000200000000000001POS ISO        000000000
130     {                     USER}     015     POS ISO        
300     {                 MSG_TYPE}     004     1200
-----------------------------------------
2207 110513968 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513968 000001 35979502 01543|5--IsoToTlv () After PrintTlvBuffer                                                          .
2207 110513968 000001 35979502 01543|5Start ValidateTlvData()                                                                     .
2207 110513968 000001 35979502 01543|5End   ValidateTlvData|Length Error(NOK|043|31|18|41)                                        .
2207 110513968 000001 35979502 01543|5End IsoToTlv ()                                                                             .
2207 110513968 000001 35979502 01543|5Start JGH InsertionAuthoActivity ()                                                         .
2207 110513968 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
048     {         ADD_DATA_PRIVATE}     036     P13006000089P17018180722
049     {       TRAN_CURRENCY_CODE}     003     
050     {       SETL_CURRENCY_CODE}     003     
051     {       BILL_CURRENCY_CODE}     003     
052     {                 PIN_DATA}     016     0000000000000000
053     {            SECURITY_DATA}     062     01010000003597950221000200000000000001POS ISO        000000000
130     {                     USER}     015     POS ISO        
300     {                 MSG_TYPE}     004     1200
200     {             ROUTING_CODE}     006     000001
201     {             CAPTURE_CODE}     006     210002
255     {               AUTHOR_SRC}     002     E2
277     {               AUTHO_FLAG}     001     P
288     {      CUR_TABLE_INDICATOR}     003     ADM
-----------------------------------------
2207 110513969 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513969 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
300     {                 MSG_TYPE}     004     1200
-----------------------------------------
2207 110513970 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513970 000001 35979502 01543|5End InsertionAuthoActivity (-1,048)                                                         .
2207 110513970 000001 35979502 01543|1TAG : 288 Length = 3, .0637                                                                 .
2207 110513970 000001 35979502 01543|5Start JGH InsertionAuthoActivity ()                                                         .
2207 110513970 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
048     {         ADD_DATA_PRIVATE}     036     P13006000089P17018180722
049     {       TRAN_CURRENCY_CODE}     003     
050     {       SETL_CURRENCY_CODE}     003     
051     {       BILL_CURRENCY_CODE}     003     
052     {                 PIN_DATA}     016     0000000000000000
053     {            SECURITY_DATA}     062     01010000003597950221000200000000000001POS ISO        000000000
130     {                     USER}     015     POS ISO        
300     {                 MSG_TYPE}     004     1200
200     {             ROUTING_CODE}     006     000001
201     {             CAPTURE_CODE}     006     210002
255     {               AUTHOR_SRC}     002     E2
277     {               AUTHO_FLAG}     001     P
288     {      CUR_TABLE_INDICATOR}     003     SAF
-----------------------------------------
2207 110513971 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513971 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
300     {                 MSG_TYPE}     004     1200
-----------------------------------------
2207 110513972 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513972 000001 35979502 01543|5End InsertionAuthoActivity (-1,048)                                                         .
2207 110513972 000001 35979502 01543|5SEVERE ERROR !!!!!                                                                          .
2207 110513972 000001 35979502 01543|5Can Not Insert Autho Activity File                                                          .
2207 110513972 000001 35979502 01543|5Start TranslateRespCode(304)                                                                .
2207 110513972 000001 35979502 01543|5End   TranslateRespCode(OK|30)                                                              .
2207 110513972 000001 35979502 01543|5Start pos_control_version()                                                                 .
2207 110513972 000001 35979502 01543|5Start IsoToTlv ()                                                                           .
2207 110513972 000001 35979502 01543|5--IsoToTlv () ISO_PROC_CODE                                                                 .
2207 110513972 000001 35979502 01543|5--IsoToTlv () ISO_TRANS_AMOUNT                                                              .
2207 110513972 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513973 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513974 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513974 000001 35979502 01543|5--IsoToTlv () ISO_STLMNT_AMOUNT                                                             .
2207 110513974 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513975 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513975 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513975 000001 35979502 01543|5--IsoToTlv () ISO_BILLING_AMOUNT                                                            .
2207 110513975 000001 35979502 01543|4AdjustTlvAmount 1                                                                           .
2207 110513976 000001 35979502 01543|4AdjustTlvAmount 3                                                                           .
2207 110513976 000001 35979502 01543|5End AdjustTlvAmount(OK)                                                                     .
2207 110513976 000001 35979502 01543|5--IsoToTlv () ISO_ORIGINAL_AMOUNTS                                                          .
2207 110513976 000001 35979502 01543|5ISO_RESPONSE_CODE(304)                                                                      .
2207 110513976 000001 35979502 01543|5--IsoToTlv () ISO_ICC_DATA                                                                  .
2207 110513976 000001 35979502 01543|5Start ISO_ICC_DATA()                                                                        .
2207 110513976 000001 35979502 01543|5End   ISO_ICC_DATA()                                                                        .
2207 110513976 000001 35979502 01543|5--IsoToTlv () ISO_RESERVED_PRIVE_USAGE_5                                                    .
2207 110513976 000001 35979502 01543|5--IsoToTlv () After Switch                                                                  .
2207 110513976 000001 35979502 01543|5--IsoToTlv () After AuthoBuildTlv                                                           .
2207 110513976 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
048     {         ADD_DATA_PRIVATE}     036     P13006000089P17018180722
049     {       TRAN_CURRENCY_CODE}     003     
050     {       SETL_CURRENCY_CODE}     003     
051     {       BILL_CURRENCY_CODE}     003     
052     {                 PIN_DATA}     016     0000000000000000
053     {            SECURITY_DATA}     062     01010000003597950221000200000000000001POS ISO        000000000
130     {                     USER}     015     POS ISO        
300     {                 MSG_TYPE}     004     1200
-----------------------------------------
2207 110513977 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513977 000001 35979502 01543|5--IsoToTlv () After PrintTlvBuffer                                                          .
2207 110513977 000001 35979502 01543|5Start ValidateTlvData()                                                                     .
2207 110513977 000001 35979502 01543|5End   ValidateTlvData|Length Error(NOK|043|31|18|41)                                        .
2207 110513977 000001 35979502 01543|5End IsoToTlv ()                                                                             .
2207 110513977 000001 35979502 01543|5Start PrintTlvBuffer ()                                                                     .
-----------------------------------------
TAG                           DESC      LEN     VALUE
---     -                    ------     ---     -----
002     {                      PAN}     016     4381724951308804
003     {          PROCESSING_CODE}     024     T0100200T0200200T0300200
004     {       AMOUNT_TRANSACTION}     018     000000000000080000
005     {        AMOUNT_SETTLEMENT}     018     000000000000080000
006     {      AMOUNT_CARD_BILLING}     018     000000000000080000
007     {          TRANS_DATE_TIME}     010     0722080513
011     {            INTERNAL STAN}     006     065883
012     {     DATE_TIME_LOCAL_TRAN}     012     180722101805
014     {              EXPIRY_DATE}     004     2005
017     {             CAPTURE_DATE}     004     0722
018     {            MERCHANT_TYPE}     004     4814
022     {                 POS_DATA}     012     81010151014c
023     {     CARD_SEQUENCE_NUMBER}     003     000
024     {            FUNCTION_CODE}     003     200
026     {        MERCHANT_ACTIVITY}     004     4814
032     {      ACQ_INST_IDENT_CODE}     006     011200
035     {              TRACK2_DATA}     036     4381724951308804D2005206149904150000
037     {                      RRN}     012     820322000089
039     {            RESPONSE_CODE}     003     304
041     {        CARD_ACC_TERMINAL}     008     62301764
042     {              CARD_ACC_ID}     015     004740000474000
043     {        CARD_ACC_LOCATION}     031     005   12345678EGY
048     {         ADD_DATA_PRIVATE}     036     P13006000089P17018180722
049     {       TRAN_CURRENCY_CODE}     003     
050     {       SETL_CURRENCY_CODE}     003     
051     {       BILL_CURRENCY_CODE}     003     
052     {                 PIN_DATA}     016     0000000000000000
053     {            SECURITY_DATA}     062     01010000003597950221000200000000000001POS ISO        000000000
130     {                     USER}     015     POS ISO        
300     {                 MSG_TYPE}     004     1200
-----------------------------------------
2207 110513978 000001 35979502 01543|5End   PrintTlvBuffer ()                                                                     .
2207 110513989 000001 35979502 01543|5End   pos_control_version(OK)                                                               .
2207 110513989 000001 35979502 01543|5End   pos_control_version(NOK)                                                              .
2207 110513989 000001 35979502 01543|5END 44  (OK)                                                                                .
2207 110513989 000001 35979502 01543|5Start IsoDumpIccFields()                                                                    .
2207 110513989 000001 35979502 01543|4         Field                        |  Len  |              Value                          .
2207 110513989 000001 35979502 01543|5End   IsoDumpIccFields()                                                                    .
2207 110513989 000001 35979502 01543|5Start IsoDumpIccFields()                                                                    .
2207 110513989 000001 35979502 01543|4         Field                        |  Len  |              Value                          .
2207 110513989 000001 35979502 01543|5End   IsoDumpIccFields()                                                                    .
2207 110513989 000001 35979502 01543|0==> ICC 001 <==                                                                             .
2207 110513989 000001 35979502 01543|5Start  Calculate_The_Mac()                                                                  .
2207 110513989 000001 35979502 01543|5Tha mac verification is desactivated by the serveur                                         .
2207 110513989 000001 35979502 01543|4Start WriteLineMsg()                                                                        .
2207 110513989 000001 35979502 01543|0Start dump_buffer()                                                                         .
2207 110513989 000001 35979502 01543|D                                     |START                                                 .
2207 110513989 000001 35979502 01543|D                                     |NETWORK                                               .
2207 110513989 000001 35979502 01543|D                                     |OUTGOING                                              .
2207 110513989 000001 35979502 01543|D                                     |TIMESTAMP           2207110513                        .
2207 110513989 000001 35979502 01543|DI S O 0 1 6 9 2 1 1 1 0 5 0 0 0 1 2  |49 53 4F 30 31 36 39 32 31 31 31 30 35 30 30 30 31 32 .
2207 110513989 000001 35979502 01543|D1 0 z 2 . . . . . . . 4 3 8 1 7 2 4  |31 30 7A 32 80 01 06 C0 C8 03 16 34 33 38 31 37 32 34 .
2207 110513989 000001 35979502 01543|D9 5 1 3 0 8 8 0 4 0 0 0 0 0 0 0 0 0  |39 35 31 33 30 38 38 30 34 30 30 30 30 30 30 30 30 30 .
2207 110513989 000001 35979502 01543|D0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 8  |30 30 30 30 30 38 30 30 30 30 30 30 30 30 30 30 30 38 .
2207 110513989 000001 35979502 01543|D0 0 0 1 8 0 7 2 2 0 8 0 5 0 0 0 0 8  |30 30 30 31 38 30 37 32 32 30 38 30 35 30 30 30 30 38 .
2207 110513989 000001 35979502 01543|D9 1 8 0 7 2 2 1 0 1 8 0 5 0 0 0 0 0  |39 31 38 30 37 32 32 31 30 31 38 30 35 30 30 30 30 30 .
2207 110513989 000001 35979502 01543|D0 0 7 2 2 . 0 1 1 2 0 0 0 0 0 0 0 0  |30 30 37 32 32 06 30 31 31 32 30 30 30 30 30 30 30 30 .
2207 110513989 000001 35979502 01543|D3 0 4 6 2 3 0 1 7 6 4 0 0 4 7 4 0 0  |33 30 34 36 32 33 30 31 37 36 34 30 30 34 37 34 30 30 .
2207 110513989 000001 35979502 01543|D0 0 4 7 4 0 0 0 . . . . . . . . . 1  |30 30 34 37 34 30 30 30 00 00 00 00 00 00 00 00 00 31 .
2207 110513989 000001 35979502 01543|D5 B C A D 1 9                        |35 42 43 41 44 31 39                                  .
2207 110513989 000001 35979502 01543|D                                     |END                 2207110513                        .
2207 110513989 000001 35979502 01543|0End   dump_buffer(VOID)                                                                     .
2207 110513989 000001 35979502 01543|4End   WriteLineMsg(OK)                                                                      .
2207 110513989 000001 35979502 01543|5Start DumpPosIso()                                                                          .
2207 110513989 000001 35979502 01543|4------------------------------------                                                        .
2207 110513989 000001 35979502 01543|4- MSG HEADER : ISO0169211105000                                                             .
2207 110513989 000001 35979502 01543|4------------------------------------                                                        .
2207 110513989 000001 35979502 01543|4- M.T.I      : 1210                                                                         .
2207 110513989 000001 35979502 01543|4------------------------------------                                                        .
2207 110513989 000001 35979502 01543|4- BIT MAP  :  7A 32 80 01 06 C0 C8 03                                                       .
2207 110513989 000001 35979502 01543|4------------------------------------                                                        .
2207 110513989 000001 35979502 01543|4- FLD (FIELD): LENGTH :  DATA                                                               .
2207 110513989 000001 35979502 01543|4------------------------------------                                                        .
2207 110513989 000001 35979502 01543|4- FLD (002) : (016) : [4381724951308804]                                                    .
2207 110513989 000001 35979502 01543|4- FLD (003) : (006) : [000000]                                                              .
2207 110513990 000001 35979502 01543|4- FLD (004) : (012) : [000000008000]                                                        .
2207 110513990 000001 35979502 01543|4- FLD (005) : (012) : [000000008000]                                                        .
2207 110513990 000001 35979502 01543|4- FLD (007) : (010) : [1807220805]                                                          .
2207 110513990 000001 35979502 01543|4- FLD (011) : (006) : [000089]                                                              .
2207 110513990 000001 35979502 01543|4- FLD (012) : (012) : [180722101805]                                                        .
2207 110513990 000001 35979502 01543|4- FLD (015) : (006) : [000000]                                                              .
2207 110513990 000001 35979502 01543|4- FLD (017) : (004) : [0722]                                                                .
2207 110513990 000001 35979502 01543|4- FLD (032) : (006) : [011200]                                                              .
2207 110513990 000001 35979502 01543|4- FLD (038) : (006) : [000000]                                                              .
2207 110513990 000001 35979502 01543|4- FLD (039) : (003) : [304]                                                                 .
2207 110513990 000001 35979502 01543|4- FLD (041) : (008) : [62301764]                                                            .
2207 110513990 000001 35979502 01543|4- FLD (042) : (015) : [004740000474000]                                                     .
2207 110513990 000001 35979502 01543|4- FLD (049) : (003) : []                                                                    .
2207 110513990 000001 35979502 01543|4- FLD (050) : (003) : []                                                                    .
2207 110513990 000001 35979502 01543|4- FLD (053) : (000) : []                                                                    .
2207 110513990 000001 35979502 01543|4- FLD (063) : (000) : []                                                                    .
2207 110513990 000001 35979502 01543|4- FLD (064) : (008) : [15BCAD19]                                                            .
2207 110513990 000001 35979502 01543|4------------------------------------                                                        .
2207 110513990 000001 35979502 01543|5End   DumpPosIso()                                                                          .
2207 110513990 000001 35979502 01543|5WriteLineMsg(OK)                                                                            .
2207 110513990 000001 35979502 01543|0==> MAW 20050107 <==                                                                        .
2207 110513990 000001 35979502 01543|5End Fin_Req_ReplyToPos....                                                                  .
2207 110513990 000001 35979502 01543|5END   FCT_PROCESS_FINANCIAL_REQ(CTRL NOK)                                                   .
2207 110513990 000001 35979502 01543|5End   ProcessEvent(FCT_PROCESS_FINANCIAL_REQ)                                               .
2207 110513990 000001 35979502 01543|5Start WaitEvent .MAN.                                                                       .
2207 110513990 000001 35979502 01543|5Start ReadLinedIsoMsg new .MAN.[40]                                                         .
2207 110513990 000001 35979502 01543|5START TCP_READCHECK .MAN. [60]                                                              .
2207 110514470 000001 35979502 01543|4End   ReadLineMsg(NOK) 1. errno=[2]                                                         .
2207 110514470 000001 35979502 01543|5ReadLineIsoMsg() -1 0                                                                       .
2207 110514470 000001 35979502 01543|5End WaitEvent(ERROR)                                                                        .
2207 110514470 000001 35979502 01543|5Event WaitEvent 1                                                                           .
2207 110514470 000001 35979502 01543|5Start RollBackOracle()                                                                      .
2207 110514471 000001 35979502 01543|5End   RollBackOracle(OK)                                                                    .
2207 110514471 000001 35979502 01543|4End   New Request From Line                                                                 .

